<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <title>Dashboard Admin FIFA</title>
    <style>
        body { font-family: 'Segoe UI', sans-serif; background-color: #f4f6f9; margin: 0; }
        .navbar { background-color: #001f3f; color: white; padding: 15px 20px; display: flex; justify-content: space-between; align-items: center; }
        .logout-btn { background: #dc3545; color: white; text-decoration: none; padding: 5px 15px; border-radius: 4px; font-weight: bold; }
        .role-badge { background: #ffc107; color: #333; padding: 2px 8px; border-radius: 4px; font-size: 12px; margin-left: 5px; font-weight: bold; }
        .container { padding: 30px; max-width: 1200px; margin: 0 auto; }
        
        /* Stats Grid */
        .stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 30px; }
        .card { background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.05); border-left: 5px solid #007bff; }
        .card h3 { margin: 0; color: #666; font-size: 14px; }
        .card p { margin: 5px 0 0 0; font-size: 24px; font-weight: bold; color: #333; }

        /* Tabel Data */
        .table-section { background: white; border-radius: 8px; box-shadow: 0 4px 10px rgba(0,0,0,0.05); overflow: hidden; }
        .table-header { padding: 20px; border-bottom: 1px solid #eee; display: flex; justify-content: space-between; align-items: center; }
        table { width: 100%; border-collapse: collapse; }
        thead { background-color: #001f3f; color: white; }
        th, td { padding: 15px; text-align: left; border-bottom: 1px solid #eee; font-size: 14px; }
        tr:hover { background-color: #f8f9fa; }
        
        .market-badge { background: #17a2b8; color: white; padding: 3px 8px; border-radius: 4px; font-weight: bold; font-size: 12px; }
        .btn-act { padding: 5px 10px; border-radius: 4px; color: white; text-decoration: none; font-size: 12px; margin-right: 5px; }
        
        /* Badge Read Only untuk Fans */
        .readonly { color: #888; font-style: italic; font-size: 12px; }
    </style>
</head>
<body>

    <nav class="navbar">
        <h3>FIFA ADMIN DASHBOARD</h3>
        <div>
            Halo, <%= user.username %> <span class="role-badge"><%= user.role %></span>
            <a href="/logout" class="logout-btn">Keluar</a>
        </div>
    </nav>

    <div class="container">
        
        <div class="stats-grid">
            <div class="card"><h3>Total Pemain</h3><p>1.000.000+</p></div>
            <div class="card" style="border-left-color: #28a745;"><h3>Total Klub</h3><p>700+</p></div>
            <div class="card" style="border-left-color: #dc3545;"><h3>Negara</h3><p>150+</p></div>
            <div class="card" style="border-left-color: #ffc107;"><h3>Server</h3><p style="color:green;">Online</p></div>
        </div>

        <div class="table-section">
            <div class="table-header">
                <h2>Data Pemain (Real-Time)</h2>
            </div>

            <table>
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Nama Pemain</th>
                        <th>Klub</th>
                        <th>Negara</th>
                        <th>Nilai Pasar (€)</th>
                        <th>Aksi</th>
                    </tr>
                </thead>
                <tbody>
                    <% if (players.length > 0) { %>
                        <% players.forEach(p => { %>
                        <tr>
                            <td>#<%= p.player_id %></td>
                            <td><strong><%= p.name %></strong></td>
                            <td><%= p.club_name ? p.club_name : '-' %></td>
                            <td><%= p.country_name ? p.country_name : '-' %></td>
                            <td><span class="market-badge">€ <%= p.market_value_eur ? p.market_value_eur.toLocaleString() : '0' %></span></td>
                            
                            <td>
                                <% if (user.role === 'Internal FIFA' || user.role === 'Talent Scout') { %>
                                    <a href="#" class="btn-act" style="background:orange;">Edit</a>
                                <% } %>

                                <% if (user.role === 'Internal FIFA') { %>
                                    <a href="/delete/<%= p.player_id %>" class="btn-act" style="background:red;" onclick="return confirm('Hapus?');">Hapus</a>
                                <% } %>

                                <% if (user.role === 'Supporter') { %>
                                    <span class="readonly">Read Only</span>
                                <% } %>
                            </td>
                        </tr>
                        <% }) %>
                    <% } else { %>
                        <tr><td colspan="6" style="text-align:center;">Data kosong.</td></tr>
                    <% } %>
                </tbody>
            </table>
        </div>

    </div>

</body>
</html>